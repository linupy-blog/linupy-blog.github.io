<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="黑红">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>sphinx博客搭建 - linupy</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "sphinx\u535a\u5ba2\u642d\u5efa";
    var mkdocs_page_input_path = "\u5173\u4e8e\u535a\u5ba2/sphinx_blog.md";
    var mkdocs_page_url = "/%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2/sphinx_blog/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'G-LZP8V4FXDZ', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> linupy</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="tocbase current">
    
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../..">Index</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../linux/work_with_arch/">完全用linux工作</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../linux/i3wm/">i3wm中文文档</a>
  </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">杂谈</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E6%9D%82%E8%B0%88/win%E5%9C%A8%E7%BC%96%E7%A8%8B%E6%96%B9%E9%9D%A2%E7%9A%84%E7%BC%BA%E9%99%B7/">win在编程方面的缺陷</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E6%9D%82%E8%B0%88/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BD%AA%E6%81%B6/">推荐系统的罪恶</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E6%9D%82%E8%B0%88/%E6%94%AF%E6%8C%81webdav%E7%9A%84%E7%BD%91%E7%9B%98%E6%8E%A8%E8%8D%90/">05支持webdav的网盘推荐</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E6%9D%82%E8%B0%88/%E6%96%87%E6%91%98-%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96/">06文摘-去中心化</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">一图胜千言</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E4%B8%80%E5%9B%BE%E8%83%9C%E5%8D%83%E8%A8%80/license/">一图看懂文章协议</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E4%B8%80%E5%9B%BE%E8%83%9C%E5%8D%83%E8%A8%80/map_zh/">中国历代地图</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E4%B8%80%E5%9B%BE%E8%83%9C%E5%8D%83%E8%A8%80/open_license/">一图看懂开源协议</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E4%B8%80%E5%9B%BE%E8%83%9C%E5%8D%83%E8%A8%80/shadowsocks/">一图看懂shadowsocks原理</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">好文_好书</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E5%A5%BD%E6%96%87_%E5%A5%BD%E4%B9%A6/Linux%E6%A1%8C%E9%9D%A2%E7%8E%A9%E5%AE%B6%E6%8C%87%E5%8D%97/">Linux桌面玩家指南</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E5%A5%BD%E6%96%87_%E5%A5%BD%E4%B9%A6/%E5%BC%80%E6%BA%90%E4%B8%96%E7%95%8C%E6%97%85%E8%A1%8C%E6%89%8B%E5%86%8C/">开源世界旅行手册</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E5%A5%BD%E6%96%87_%E5%A5%BD%E4%B9%A6/%E5%93%A5%E5%BE%B7%E5%B0%94%E5%92%8C%E7%89%A9%E7%90%86%E5%AD%A6%E7%9A%84%E7%BB%88%E7%BB%93/">哥德尔和物理学的终结</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E5%A5%BD%E6%96%87_%E5%A5%BD%E4%B9%A6/more/">更多</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">好人</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E5%A5%BD%E4%BA%BA/%E7%BC%96%E7%A8%8B%E9%9A%8F%E6%83%B3/">好人</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">我的话</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../%E8%AF%AD%E5%BD%95/">语录-我的话</a>
  </li>
        
      </ul>
    </li>
    
  </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">linupy</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>sphinx博客搭建</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="sphinx">sphinx博客搭建</h1>
<blockquote>
<p>刚刚进入了2020年,python2正式退出了历史舞台.而网上大部分的sphinx都是基於python2搭建的,可能以后会有各种兼容性的问题.所以這裏使用python3環境搭建.</p>
</blockquote>
<h2 id="_1">環境:</h2>
<pre><code class="language-bash">mkdir blog #　新建一個博客文件夾
cd blog
virtualenv envs # 新建一個虛擬環境
source envs/bin/activate # 激活虚拟环境
pip3 install sphinx sphinx-autobuild sphinx-rtd-theme
sphinx-quickstart # 創建目錄樹
</code></pre>
<h2 id="_2">配置:</h2>
<pre><code class="language-bash">.
├── build
├── dp.sh
├── make.bat
├── Makefile
├── README.md
├── source
└── venv
</code></pre>
<blockquote>
<p>你創建的博客目錄沒有dp.sh和README.md這兩個文件,第一個是我push用的,第二個是git目錄要求的.</p>
</blockquote>
<p>其中make.bat和Makefile都是部署文件用不到,我們寫的博客都應該放在source目錄中.bliud目錄用來放置生成的HTML文件.
讓我們進source目錄看看.</p>
<pre><code class="language-bash">├── _build
├── conf.py
├── index.rst
├── linux
├── net_work
├── _static
├── _templates
├── 关于博客
├── 关于程序配置
├── 好人
├── 好文_好书
├── 语录.md
└── 闲谈
</code></pre>
<p>conf.py是配置文件用來設置主題語言插件等,index.rst是索引頁,也就是博客的主頁.rst是reStructureText文件的後綴,sphinx文檔默認使用reStructureText格式.
我習慣使用MarkDown寫博客所以需要在conf.py修改一下.</p>
<pre><code class="language-bash">pip3 install recommonmark # 安裝md支持
vim conf.py
</code></pre>
<p>添加下面的內容:</p>
<pre><code class="language-bash">html_theme = 'sphinx_rtd_theme'  # 修改主題爲sphinx_rsd_theme
 # supposed for markdown
 65 from recommonmark.parser import CommonMarkParser
 66 source_parsers = {
 67 '.md': CommonMarkParser,
 68 }
 69 source_suffix = ['.rst', '.md']   
</code></pre>
<p>現在博客就支持md格式了.</p>
<p>現在讓我們看看index.rst.</p>
<p><code>vim index.rst</code></p>
<pre><code class="language-rst"> 1 .. fazong documentation master file, created by                              
  2    sphinx-quickstart on Sat Jan  4 21:22:44 2020.
  3    You can adapt this file completely to your liking, but it should at least
  4    contain the root `toctree` directive.
  5 
  6 法宗不是机器人
  7 ==================================
  8 
  9 .. toctree::
 10    :maxdepth: 2 # 設置顯示的最大深度
 11     # 這裏需要空一行        
 12    linux/work_with_arch.md
 13    linux/index.rst
 14    好文_好书/index.rst
 15    好人/good_man.rst
 16    闲谈/talk.rst
 17    /语录.md
 18    关于程序配置/index.rst
 19    关于博客/index.rst
        # 可以在這裏建立子目錄,然後用上面的方式索引,子目錄中也需要建立index.srt文件進行索引,具體目錄結構可以去github看.
</code></pre>
<h2 id="_3">部署:</h2>
<p>在博客目錄中執行<code>make html</code> 生成html文件.生成的html文件會在<code>./build/html</code>中.</p>
<p>到github創建一個倉庫,名字的格式是: <code>your_github_name.github.io</code></p>
<p><img alt="" src="../../img/gitpages.png" /></p>
<p>然後進入<code>build/html</code>目錄,根據gitgub的提示,把html中的文件push到github上.</p>
<p><strong>注意: gitpages會忽視以下劃線開頭的文件,爲使_static中的css等被加載,需要在html目錄中添加一個<code>.nojekyll</code>文件.</strong></p>
<p>簡化操作,我寫了一個腳本:</p>
<pre><code class="language-bash">  1 echo &quot;making&quot;                                                                             
  2 
  3 make html
  4 
  5 echo &quot;正在push&quot;
  7 cd build/html/
  8 git add .
  9 git commit -m 'update blog files'
 10 git push origin master --force
 11 git push coding master --force
 12 echo &quot;push完成&quot;                                                                                                                                                                                            
</code></pre>
<p>每次發佈文章,執行這個腳本即可.</p>
<p>現在訪問<code>https://user_name.github.io</code>就可以看到你的博客了.</p>
<p>本文完.</p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>2018至今, 博客文章无特殊说明,以CC-BY-NC协议发布</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
